{% extends "base.html" %}
{% load static %}

{% block title %}{{ project.title }} | GreenShan Dynamics{% endblock %}

{% block meta_description %}
{{ project.description|truncatechars:160 }}
{% endblock %}

{% block content %}

<!-- PROJECT HEADER -->
<section class="container" style="margin-top: 80px;">
  <h1>{{ project.title }}</h1>

  {% if project.client or project.project_date %}
    <p class="muted" style="margin-top: 10px;">
      {% if project.client %}Client: {{ project.client }}{% endif %}
      {% if project.project_date %} · {{ project.project_date|date:"Y" }}{% endif %}
    </p>
  {% endif %}
</section>

<!-- COVER IMAGE -->
{% if project.cover %}
<section class="container" style="margin-top: 40px;">
  <div class="card">
    <img
      src="{{ project.cover.url }}"
      alt="{{ project.title }}"
      style="border-radius: 10px; width: 100%;"
      loading="lazy">
  </div>
</section>
{% endif %}

<!-- PROJECT DESCRIPTION -->
{% if project.description %}
<section class="container" style="margin-top: 50px;">
  <h2>Project Overview</h2>
  <p style="max-width: 900px; margin-top: 20px;">
    {{ project.description }}
  </p>
</section>
{% endif %}

<!-- PROJECT MEDIA GALLERY -->
{% if project.media.all %}
<section class="container" style="margin-top: 60px;">
  <h2>Gallery</h2>

  <div class="portfolio-grid" style="margin-top: 30px;">
    {% for media in project.media.all %}
      <div class="card">

        {% if media.is_image %}
          <img
            src="{{ media.file.url }}"
            alt="{{ project.title }}"
            loading="lazy">
        {% elif media.is_video %}
          <video controls style="width:100%; border-radius:8px;">
            <source src="{{ media.file.url }}">
          </video>
        {% endif %}

        {% if media.caption %}
          <p class="muted" style="margin-top:10px;">
            {{ media.caption }}
          </p>
        {% endif %}

      </div>
    {% endfor %}
  </div>
</section>
{% endif %}

<!-- BACK LINK -->
<section class="container" style="margin-top: 80px; text-align: center;">
  <a href="{% url 'greenshan:portfolio' %}" class="btn ghost">
    ← Back to Portfolio
  </a>
</section>

{% endblock %}
